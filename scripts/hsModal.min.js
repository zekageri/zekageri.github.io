class hsModal extends HTMLElement{openBtn=null;closeBtn=null;id=null;closeCb=null;openCb=null;saveCb=null;innerDiv=null;form=!1;lastScrollPos=0;MAX_SCROLL_POS=150;connectedCallback(){this.id=this.getAttribute("id"),this.id?(this.openBtn=document.querySelector(`.hs-Modal-Btn.open[target="#${this.id}"]`),this.closeBtn=this.querySelector(".hs-Modal-Btn.close"),this.saveBtn=this.querySelector(".hs-Modal-Btn.save"),this.innerDiv=this.querySelector(".hs-Modal-Inner"),this.title=this.querySelector(".hs-Modal-Title").innerHTML,this.form=this.hasForm(),this.openEvtHandler(),this.closeEvtHandler(),this.saveEvtHandler(),this.scrollEvtHandler()):console.error("[HSH-Modal] - Modal should have an ID.")}scrollEvtHandler(){let e=this.querySelector(".hs-Modal-Header"),t=this;this.innerDiv.addEventListener("scroll",(function(o){let s=this.scrollTop;s>=t.MAX_SCROLL_POS?s<t.lastScrollPos?e.classList.remove("scrolled"):e.classList.contains("scrolled")||e.classList.add("scrolled"):s<t.MAX_SCROLL_POS&&e.classList.remove("scrolled"),t.lastScrollPos=s}))}on(e,t){"close"==e?this.closeCb=t:"open"==e?this.openCb=t:"save"==e?this.saveCb=t:console.warn(`[HSH-Modal] - No such event type on HsH Modal. Event: ${e}`)}openEvtHandler(){let e=this;this.openBtn.addEventListener("click",(function(t){t.preventDefault(),e.open()}))}saveEvtHandler(){if(!this.saveBtn)return;let e=this;this.saveBtn.addEventListener("click",(function(t){t.preventDefault(),e.saveCb&&e.saveCb(e.getForm())}))}closeEvtHandler(){if(!this.closeBtn)return;let e=this;this.closeBtn.addEventListener("click",(function(t){t.preventDefault(),e.close()})),this.addEventListener("click",(function(t){t.target.closest(".hs-Modal-Inner")||e.close()}))}hasForm(){let e=this.querySelector("form");return e||(console.warn("[HSH-Modal] - Modal body contains no form field."),!1)}close(e=!0){this.closeCb&&e&&this.closeCb(this.id),this.classList.remove("open")}open(e=!0){this.openCb&&e&&this.openCb(this.id),this.classList.add("open")}setTitle(e){return this.querySelector(".hs-Modal-Title").innerHTML=e,this.title=e,e}resetForm(){if(!this.form)return{};this.form.reset()}getTitle(){return this.title}getID(){return this.id}getForm(){if(!this.form)return{};const e=new FormData(this.form);let t=Object.fromEntries(e),o=this.form.querySelectorAll("input[type='checkbox']");for(const e of o){t[e.getAttribute("name")]=e.checked}return t}}customElements.define("hs-modal",hsModal);let testModal=document.querySelector("#testModal"),testModal2=document.querySelector("#testModal2");testModal.on("open",(function(e){console.log(`Modal opened with id: ${e}`)})),testModal.on("close",(function(e){console.log(`Modal closed with id: ${e}`)})),testModal.on("noSuchEvent",(function(e){})),testModal.open(),setTimeout((function(){testModal.close()}),3e3),testModal2.on("save",(function(e){console.log("modalFormData: ",e),testModal2.resetForm()}));let modalFormData=testModal2.getForm();console.log("modalFormData: ",modalFormData);
